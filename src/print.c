#include "print.h"
extern volatile short PROGRESS;
void print(unsigned short field[]) {
    PROGRESS = 0b1000000000000000;
    for (short i = 6, d = 0; i <= 96; i+=6, d++) {
        unsigned short ans = 0;
        for (short j = 1; j <= 4; j++) {
            ans <<= 4;
            unsigned short ceils = field[i + j];
            ans |= ((0b1000000000000000 & ceils) >> 12) | ((0b0000100000000000 & ceils) >> 9) | ((0b0000000010000000 & ceils) >> 6) | ((0b0000000000001000 & ceils) >> 3);
        }
        DISPLAY[d] = ans;
        PROGRESS |= PROGRESS >> 1;
    }
    PROGRESS = 0;
}
#ifdef PRINT_TEST
#include <stdio.h>
unsigned short field[] = {
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b1000100000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000001000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b1000000000000000, 0b1000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b1000000000000000, 0b1000100000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000010000000, 0b1000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000100010000000, 0b0000000010000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000010000000, 0b0000000010000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000001000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000100010000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
};
void print_b(short word) {
    for (short i = 15; i >= 0; i--) {
        printf("%d", (word >> i) & 1);
    }
    printf("\n");
}
volatile short DISPLAY[16];
int main(void) {
    print(field);
    for (short i = 0; i < 16; i++) {
        print_b(DISPLAY[i]);
    }
}
#endif